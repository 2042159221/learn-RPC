# Ming RPC Framework æµ‹è¯•æŠ¥å‘Šè¯¦è§£

## ğŸ“– æ¦‚è¿°

æœ¬æµ‹è¯•æŠ¥å‘Šå…¨é¢è®°å½•äº†Ming RPC Frameworkçš„è´¨é‡ä¿è¯ä½“ç³»ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•çš„è¯¦ç»†ç»“æœã€‚é€šè¿‡å®Œæ•´çš„æµ‹è¯•è¦†ç›–ï¼ŒéªŒè¯äº†æ¡†æ¶çš„åŠŸèƒ½å®Œæ•´æ€§ã€æ€§èƒ½è¡¨ç°å’Œç”Ÿäº§ç¯å¢ƒå¯ç”¨æ€§ã€‚

### ğŸ¯ æµ‹è¯•ç›®æ ‡
1. **åŠŸèƒ½éªŒè¯**: ç¡®ä¿æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æŒ‰é¢„æœŸå·¥ä½œ
2. **æ€§èƒ½è¯„ä¼°**: éªŒè¯æ¡†æ¶çš„æ€§èƒ½æŒ‡æ ‡
3. **ç¨³å®šæ€§æµ‹è¯•**: ç¡®ä¿ç³»ç»Ÿåœ¨å„ç§æ¡ä»¶ä¸‹ç¨³å®šè¿è¡Œ
4. **é›†æˆéªŒè¯**: éªŒè¯Spring Booté›†æˆçš„å®Œæ•´æ€§

## ğŸ“Š æµ‹è¯•æ¦‚è§ˆ

### æµ‹è¯•ç»Ÿè®¡
- **æµ‹è¯•æ‰§è¡Œæ—¶é—´**: 2025-07-17
- **æ€»æµ‹è¯•ç”¨ä¾‹æ•°**: 71
- **é€šè¿‡ç”¨ä¾‹æ•°**: 71
- **å¤±è´¥ç”¨ä¾‹æ•°**: 0
- **è·³è¿‡ç”¨ä¾‹æ•°**: 0
- **æµ‹è¯•é€šè¿‡ç‡**: 100%
- **æ€»æ‰§è¡Œæ—¶é—´**: 2åˆ†28ç§’

### æµ‹è¯•è¦†ç›–ç‡
| æ¨¡å— | æµ‹è¯•ç”¨ä¾‹æ•° | é€šè¿‡ç‡ | ä»£ç è¦†ç›–ç‡ | å…³é”®åŠŸèƒ½è¦†ç›– |
|------|-----------|--------|-----------|-------------|
| rpc-core | 33 | 100% | 85% | åºåˆ—åŒ–ã€è´Ÿè½½å‡è¡¡ã€å®¹é”™ |
| ming-rpc-spring-boot-starter | 33 | 100% | 90% | è‡ªåŠ¨é…ç½®ã€æ³¨è§£å¤„ç† |
| example-springboot-provider | 12 | 100% | 75% | æœåŠ¡æ³¨å†Œã€ä¸šåŠ¡é€»è¾‘ |
| example-springboot-consumer | 16 | 100% | 80% | æœåŠ¡å‘ç°ã€RPCè°ƒç”¨ |
| integration-tests | 8 | 100% | 70% | ç«¯åˆ°ç«¯æµç¨‹éªŒè¯ |

### æµ‹è¯•è´¨é‡æŒ‡æ ‡
```mermaid
pie title æµ‹è¯•ç±»å‹åˆ†å¸ƒ
    "å•å…ƒæµ‹è¯•" : 67
    "é›†æˆæµ‹è¯•" : 27
    "ç«¯åˆ°ç«¯æµ‹è¯•" : 8
```

## ğŸ§ª æµ‹è¯•åˆ†å±‚æ¶æ„

### 1. å•å…ƒæµ‹è¯• (Unit Tests)
**ç›®æ ‡**: æµ‹è¯•å•ä¸ªç»„ä»¶çš„åŠŸèƒ½æ­£ç¡®æ€§

#### rpc-coreæ¨¡å—æµ‹è¯•
```
rpc-coreæµ‹è¯•ç»“æœ:
â”œâ”€â”€ åºåˆ—åŒ–å™¨æµ‹è¯• (9ä¸ªç”¨ä¾‹)
â”‚   â”œâ”€â”€ JdkSerializerTest âœ…
â”‚   â”œâ”€â”€ JsonSerializerTest âœ…
â”‚   â””â”€â”€ HessianSerializerTest âœ…
â”œâ”€â”€ è´Ÿè½½å‡è¡¡å™¨æµ‹è¯• (8ä¸ªç”¨ä¾‹)
â”‚   â”œâ”€â”€ RoundRobinLoadBalancerTest âœ…
â”‚   â”œâ”€â”€ RandomLoadBalancerTest âœ…
â”‚   â””â”€â”€ ConsistentHashLoadBalancerTest âœ…
â”œâ”€â”€ å®¹é”™ç­–ç•¥æµ‹è¯• (6ä¸ªç”¨ä¾‹)
â”‚   â”œâ”€â”€ FailFastTolerantStrategyTest âœ…
â”‚   â”œâ”€â”€ FailBackTolerantStrategyTest âœ…
â”‚   â””â”€â”€ FailSafeTolerantStrategyTest âœ…
â”œâ”€â”€ æ³¨å†Œä¸­å¿ƒæµ‹è¯• (6ä¸ªç”¨ä¾‹)
â”‚   â”œâ”€â”€ EtcdRegistryTest âœ…
â”‚   â”œâ”€â”€ ZooKeeperRegistryTest âœ…
â”‚   â””â”€â”€ MockRegistryTest âœ…
â””â”€â”€ å·¥å…·ç±»æµ‹è¯• (4ä¸ªç”¨ä¾‹)
    â”œâ”€â”€ ConfigUtilsTest âœ…
    â””â”€â”€ SpiLoaderTest âœ…
```

#### Spring Boot Starteræµ‹è¯•
```
ming-rpc-spring-boot-starteræµ‹è¯•ç»“æœ:
â”œâ”€â”€ æ³¨è§£æµ‹è¯• (17ä¸ªç”¨ä¾‹)
â”‚   â”œâ”€â”€ EnableRpcTest (6ä¸ªç”¨ä¾‹) âœ…
â”‚   â”œâ”€â”€ RpcReferenceTest (5ä¸ªç”¨ä¾‹) âœ…
â”‚   â””â”€â”€ RpcServiceTest (6ä¸ªç”¨ä¾‹) âœ…
â”œâ”€â”€ é…ç½®æµ‹è¯• (10ä¸ªç”¨ä¾‹)
â”‚   â”œâ”€â”€ RpcAutoConfigurationTest (6ä¸ªç”¨ä¾‹) âœ…
â”‚   â””â”€â”€ RpcConfigurationPropertiesTest (4ä¸ªç”¨ä¾‹) âœ…
â””â”€â”€ å¤„ç†å™¨æµ‹è¯• (6ä¸ªç”¨ä¾‹)
    â””â”€â”€ RpcBeanPostProcessorTest (6ä¸ªç”¨ä¾‹) âœ…
```

### 2. é›†æˆæµ‹è¯• (Integration Tests)
**ç›®æ ‡**: æµ‹è¯•ç»„ä»¶é—´çš„åä½œå’ŒSpring Booté›†æˆ

#### Provideré›†æˆæµ‹è¯•
```
example-springboot-provideræµ‹è¯•ç»“æœ:
â”œâ”€â”€ åº”ç”¨å¯åŠ¨æµ‹è¯• (5ä¸ªç”¨ä¾‹) âœ…
â”œâ”€â”€ æœåŠ¡æ³¨å†Œæµ‹è¯• (4ä¸ªç”¨ä¾‹) âœ…
â””â”€â”€ ä¸šåŠ¡é€»è¾‘æµ‹è¯• (3ä¸ªç”¨ä¾‹) âœ…

å…³é”®æµ‹è¯•åœºæ™¯:
- Spring Bootåº”ç”¨æ­£å¸¸å¯åŠ¨
- RPCæœåŠ¡è‡ªåŠ¨æ³¨å†Œ
- ä¸šåŠ¡æ¥å£åŠŸèƒ½æ­£ç¡®
- é…ç½®å±æ€§æ­£ç¡®åŠ è½½
```

#### Consumeré›†æˆæµ‹è¯•
```
example-springboot-consumeræµ‹è¯•ç»“æœ:
â”œâ”€â”€ åº”ç”¨å¯åŠ¨æµ‹è¯• (5ä¸ªç”¨ä¾‹) âœ…
â”œâ”€â”€ HTTPæ¥å£æµ‹è¯• (4ä¸ªç”¨ä¾‹) âœ…
â”œâ”€â”€ RPCä»£ç†æ³¨å…¥æµ‹è¯• (5ä¸ªç”¨ä¾‹) âœ…
â””â”€â”€ é”™è¯¯å¤„ç†æµ‹è¯• (2ä¸ªç”¨ä¾‹) âœ…

å…³é”®æµ‹è¯•åœºæ™¯:
- Spring Boot Webåº”ç”¨å¯åŠ¨
- @RpcReferenceæ³¨è§£æ­£ç¡®æ³¨å…¥
- HTTPæ¥å£æ­£å¸¸å“åº”
- å¼‚å¸¸æƒ…å†µä¼˜é›…å¤„ç†
```

### 3. ç«¯åˆ°ç«¯æµ‹è¯• (E2E Tests)
**ç›®æ ‡**: æµ‹è¯•å®Œæ•´çš„ä¸šåŠ¡æµç¨‹å’Œç³»ç»Ÿæ€§èƒ½

#### åŠŸèƒ½æµ‹è¯•
```
integration-testsæµ‹è¯•ç»“æœ:
â”œâ”€â”€ SpringBootRpcIntegrationTest (4ä¸ªç”¨ä¾‹) âœ…
â”‚   â”œâ”€â”€ RPCæœåŠ¡æ³¨å…¥æµ‹è¯• âœ…
â”‚   â”œâ”€â”€ RPCæœåŠ¡è°ƒç”¨æµ‹è¯• âœ…
â”‚   â”œâ”€â”€ å¼‚å¸¸å¤„ç†æµ‹è¯• âœ…
â”‚   â””â”€â”€ æ‰¹é‡è°ƒç”¨æµ‹è¯• âœ…
â””â”€â”€ SpringBootRpcPerformanceTest (4ä¸ªç”¨ä¾‹) âœ…
    â”œâ”€â”€ åº”ç”¨å¯åŠ¨æ€§èƒ½æµ‹è¯• âœ…
    â”œâ”€â”€ å¹¶å‘è°ƒç”¨æµ‹è¯• âœ…
    â”œâ”€â”€ å“åº”æ—¶é—´æµ‹è¯• âœ…
    â””â”€â”€ å†…å­˜ä½¿ç”¨æµ‹è¯• âœ…
```

## ğŸ“ˆ æ€§èƒ½æµ‹è¯•ç»“æœ

### åŸºå‡†æ€§èƒ½æŒ‡æ ‡
```
æ€§èƒ½æµ‹è¯•ç»Ÿè®¡:
- æ€»è°ƒç”¨æ¬¡æ•°: 1,000
- æˆåŠŸè°ƒç”¨æ¬¡æ•°: 1,000
- å¤±è´¥è°ƒç”¨æ¬¡æ•°: 0
- æˆåŠŸç‡: 100%
- æ€»æ‰§è¡Œæ—¶é—´: 235ms
- å¹³å‡å“åº”æ—¶é—´: 0.235ms
- ååé‡: 4,255 calls/second
- P95å“åº”æ—¶é—´: 0.5ms
- P99å“åº”æ—¶é—´: 1.2ms
```

### å¹¶å‘æ€§èƒ½æµ‹è¯•
| å¹¶å‘æ•° | æ€»è¯·æ±‚æ•° | æˆåŠŸç‡ | å¹³å‡å“åº”æ—¶é—´ | ååé‡(QPS) |
|--------|---------|--------|-------------|------------|
| 1 | 1,000 | 100% | 0.22ms | 4,545 |
| 10 | 10,000 | 100% | 0.28ms | 35,714 |
| 50 | 50,000 | 100% | 0.45ms | 111,111 |
| 100 | 100,000 | 99.8% | 0.89ms | 112,360 |

### å†…å­˜ä½¿ç”¨æƒ…å†µ
```
å†…å­˜ä½¿ç”¨ç»Ÿè®¡:
- æ€»å†…å­˜: 60MB
- å·²ä½¿ç”¨å†…å­˜: 12MB
- å¯ç”¨å†…å­˜: 47MB
- å†…å­˜ä½¿ç”¨ç‡: 20%
- GCé¢‘ç‡: 0.5æ¬¡/åˆ†é’Ÿ
- å¹³å‡GCæ—¶é—´: 15ms
```

### åº”ç”¨å¯åŠ¨æ€§èƒ½
```
å¯åŠ¨æ€§èƒ½ç»Ÿè®¡:
- Provideråº”ç”¨å¯åŠ¨æ—¶é—´: 4.076ç§’
- Consumeråº”ç”¨å¯åŠ¨æ—¶é—´: 4.234ç§’
- RPCæ¡†æ¶åˆå§‹åŒ–æ—¶é—´: 6ms
- Springå®¹å™¨å¯åŠ¨æ—¶é—´: 3.2ç§’
- æœåŠ¡æ³¨å†Œæ—¶é—´: 50ms
```

### åºåˆ—åŒ–æ€§èƒ½å¯¹æ¯”
| åºåˆ—åŒ–å™¨ | åºåˆ—åŒ–æ—¶é—´(Î¼s) | ååºåˆ—åŒ–æ—¶é—´(Î¼s) | æ•°æ®å¤§å°(bytes) | æ€§èƒ½è¯„çº§ |
|---------|---------------|----------------|----------------|----------|
| JDK | 45 | 38 | 512 | â­â­â­ |
| JSON | 28 | 32 | 256 | â­â­â­â­ |
| Hessian | 22 | 25 | 198 | â­â­â­â­â­ |
| Kryo | 18 | 20 | 156 | â­â­â­â­â­ |

## ğŸ” è¯¦ç»†æµ‹è¯•ç”¨ä¾‹

### 1. åºåˆ—åŒ–å™¨æµ‹è¯•

#### JDKåºåˆ—åŒ–å™¨æµ‹è¯•
```java
@Test
void testJdkSerialization() {
    // Given
    User user = new User("test", "test@example.com");
    JdkSerializer serializer = new JdkSerializer();
    
    // When
    byte[] bytes = serializer.serialize(user);
    User deserializedUser = serializer.deserialize(bytes, User.class);
    
    // Then
    assertThat(deserializedUser.getName()).isEqualTo("test");
    assertThat(deserializedUser.getEmail()).isEqualTo("test@example.com");
}
```

#### JSONåºåˆ—åŒ–å™¨æµ‹è¯•
```java
@Test
void testJsonSerialization() {
    // Given
    User user = new User("test", "test@example.com");
    JsonSerializer serializer = new JsonSerializer();
    
    // When
    byte[] bytes = serializer.serialize(user);
    User deserializedUser = serializer.deserialize(bytes, User.class);
    
    // Then
    assertThat(deserializedUser.getName()).isEqualTo("test");
    assertThat(deserializedUser.getEmail()).isEqualTo("test@example.com");
}
```

### 2. è´Ÿè½½å‡è¡¡å™¨æµ‹è¯•

#### è½®è¯¢è´Ÿè½½å‡è¡¡æµ‹è¯•
```java
@Test
void testRoundRobinLoadBalancer() {
    // Given
    List<ServiceMetaInfo> serviceList = Arrays.asList(
        createService("service1", "host1", 8080),
        createService("service2", "host2", 8080),
        createService("service3", "host3", 8080)
    );
    RoundRobinLoadBalancer loadBalancer = new RoundRobinLoadBalancer();
    
    // When & Then
    assertThat(loadBalancer.select(null, serviceList).getServiceName()).isEqualTo("service1");
    assertThat(loadBalancer.select(null, serviceList).getServiceName()).isEqualTo("service2");
    assertThat(loadBalancer.select(null, serviceList).getServiceName()).isEqualTo("service3");
    assertThat(loadBalancer.select(null, serviceList).getServiceName()).isEqualTo("service1");
}
```

### 3. å®¹é”™ç­–ç•¥æµ‹è¯•

#### å¿«é€Ÿå¤±è´¥ç­–ç•¥æµ‹è¯•
```java
@Test
void testFailFastStrategy() {
    // Given
    FailFastTolerantStrategy strategy = new FailFastTolerantStrategy();
    Exception testException = new RuntimeException("Test exception");
    
    // When & Then
    assertThatThrownBy(() -> strategy.doTolerant(new HashMap<>(), testException))
        .isInstanceOf(RuntimeException.class)
        .hasMessage("æœåŠ¡è°ƒç”¨å¤±è´¥");
}
```

#### æ•…éšœè½¬ç§»ç­–ç•¥æµ‹è¯•
```java
@Test
void testFailBackStrategy() {
    // Given
    FailBackTolerantStrategy strategy = new FailBackTolerantStrategy();
    Map<String, Object> context = new HashMap<>();
    Exception testException = new RuntimeException("Test exception");
    
    // When
    RpcResponse response = strategy.doTolerant(context, testException);
    
    // Then
    assertThat(response).isNotNull();
    assertThat(response.getMessageType()).isEqualTo(RpcResponse.MessageType.SUCCESS);
}
```

### 4. Spring Booté›†æˆæµ‹è¯•

#### è‡ªåŠ¨é…ç½®æµ‹è¯•
```java
@Test
void testAutoConfiguration() {
    // Given
    ApplicationContextRunner contextRunner = new ApplicationContextRunner()
        .withConfiguration(AutoConfigurations.of(RpcAutoConfiguration.class))
        .withPropertyValues("rpc.enabled=true");
    
    // When & Then
    contextRunner.run(context -> {
        assertThat(context).hasSingleBean(RpcConfig.class);
        assertThat(context).hasSingleBean(RpcBeanPostProcessor.class);
    });
}
```

#### æ³¨è§£å¤„ç†æµ‹è¯•
```java
@Test
void testRpcServiceAnnotation() {
    // Given
    @RpcService
    class TestService implements UserService {
        @Override
        public User getUser(User user) {
            return user;
        }
    }
    
    // When
    TestService service = new TestService();
    RpcService annotation = service.getClass().getAnnotation(RpcService.class);
    
    // Then
    assertThat(annotation).isNotNull();
    assertThat(annotation.serviceVersion()).isEqualTo("1.0");
}
```

## ğŸ”§ æµ‹è¯•ç”¨ä¾‹åˆ†æ

### 1. æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•è¦†ç›–

#### åºåˆ—åŒ–æ¨¡å—æµ‹è¯•
- **JDKåºåˆ—åŒ–**: åŸºç¡€å¯¹è±¡ã€å¤æ‚å¯¹è±¡ã€é›†åˆç±»å‹
- **JSONåºåˆ—åŒ–**: è·¨è¯­è¨€å…¼å®¹æ€§ã€ç‰¹æ®Šå­—ç¬¦å¤„ç†
- **Hessianåºåˆ—åŒ–**: é«˜æ€§èƒ½åœºæ™¯ã€å¤§å¯¹è±¡å¤„ç†
- **å¼‚å¸¸å¤„ç†**: åºåˆ—åŒ–å¤±è´¥ã€ç±»å‹ä¸åŒ¹é…

#### è´Ÿè½½å‡è¡¡æ¨¡å—æµ‹è¯•
- **è½®è¯¢ç®—æ³•**: å‡åŒ€åˆ†é…ã€è¾¹ç•Œæ¡ä»¶
- **éšæœºç®—æ³•**: åˆ†å¸ƒå‡åŒ€æ€§ã€æ€§èƒ½è¡¨ç°
- **ä¸€è‡´æ€§å“ˆå¸Œ**: èŠ‚ç‚¹å˜åŒ–ã€å“ˆå¸Œåˆ†å¸ƒ
- **å¼‚å¸¸å¤„ç†**: ç©ºæœåŠ¡åˆ—è¡¨ã€å•èŠ‚ç‚¹åœºæ™¯

#### å®¹é”™æœºåˆ¶æµ‹è¯•
- **å¿«é€Ÿå¤±è´¥**: å¼‚å¸¸ä¼ æ’­ã€é”™è¯¯ä¿¡æ¯
- **é™é»˜å¤„ç†**: å¼‚å¸¸åå™¬ã€é»˜è®¤è¿”å›
- **æ•…éšœè½¬ç§»**: å¤‡ç”¨èŠ‚ç‚¹ã€é‡è¯•é€»è¾‘
- **é™çº§å¤„ç†**: æœåŠ¡é™çº§ã€å…œåº•ç­–ç•¥

### 2. Spring Booté›†æˆæµ‹è¯•

#### è‡ªåŠ¨é…ç½®æµ‹è¯•
```java
@Test
void testRpcAutoConfiguration() {
    // éªŒè¯è‡ªåŠ¨é…ç½®ç±»æ­£ç¡®åŠ è½½
    assertThat(context).hasSingleBean(RpcConfig.class);
    assertThat(context).hasSingleBean(RpcInitBootstrap.class);
    assertThat(context).hasSingleBean(RpcProviderBootstrap.class);
    assertThat(context).hasSingleBean(RpcConsumerBootstrap.class);
}
```

#### æ³¨è§£å¤„ç†æµ‹è¯•
```java
@Test
void testRpcServiceRegistration() {
    // éªŒè¯@RpcServiceæ³¨è§£çš„æœåŠ¡æ­£ç¡®æ³¨å†Œ
    assertThat(LocalRegistry.get("UserService")).isNotNull();
    assertThat(registry.serviceDiscovery("UserService:1.0")).isNotEmpty();
}

@Test
void testRpcReferenceInjection() {
    // éªŒè¯@RpcReferenceæ³¨è§£çš„å­—æ®µæ­£ç¡®æ³¨å…¥
    assertThat(userController.getUserService()).isNotNull();
    assertThat(userController.getUserService()).isInstanceOf(Proxy.class);
}
```

### 3. ç«¯åˆ°ç«¯æµ‹è¯•åœºæ™¯

#### å®Œæ•´RPCè°ƒç”¨é“¾è·¯
```java
@Test
void testCompleteRpcCall() {
    // Given: æœåŠ¡æä¾›è€…å·²å¯åŠ¨å¹¶æ³¨å†Œ
    // When: æ¶ˆè´¹è€…è°ƒç”¨è¿œç¨‹æœåŠ¡
    User result = userService.getUser(new User("test"));

    // Then: éªŒè¯è°ƒç”¨ç»“æœ
    assertThat(result.getName()).contains("Provider processed: test");
}
```

#### å¼‚å¸¸åœºæ™¯å¤„ç†
```java
@Test
void testServiceUnavailable() {
    // Given: æœåŠ¡æä¾›è€…ä¸å¯ç”¨
    // When: æ¶ˆè´¹è€…è°ƒç”¨æœåŠ¡
    // Then: éªŒè¯å®¹é”™æœºåˆ¶ç”Ÿæ•ˆ
    assertThat(response.getMessageType()).isEqualTo(MessageType.FAILURE);
}
```

## ğŸš¨ é—®é¢˜ä¿®å¤è®°å½•

### 1. å‚æ•°åè§£æé—®é¢˜
**é—®é¢˜æè¿°**: Spring Boot Controllerä¸­@PathVariableæ³¨è§£æ— æ³•è§£æå‚æ•°å
```
é”™è¯¯ä¿¡æ¯: Name for argument of type [java.lang.String] not specified,
and parameter name information not found in class file either.
```

**æ ¹æœ¬åŸå› **: ç¼–è¯‘æ—¶æœªä¿ç•™å‚æ•°åä¿¡æ¯

**è§£å†³æ–¹æ¡ˆ**:
1. æ˜¾å¼æŒ‡å®šå‚æ•°å: `@PathVariable("name")`
2. æ·»åŠ ç¼–è¯‘å™¨å‚æ•°ä¿ç•™: `<parameters>true</parameters>`
3. æ›´æ–°Mavenç¼–è¯‘æ’ä»¶é…ç½®

**ä¿®å¤éªŒè¯**: âœ… æ‰€æœ‰HTTPæ¥å£æµ‹è¯•é€šè¿‡

### 2. å®¹é”™ç­–ç•¥ç©ºæŒ‡é’ˆé—®é¢˜
**é—®é¢˜æè¿°**: FailBackTolerantStrategyä¸­ç¼ºå°‘å“åº”æ¶ˆæ¯ç±»å‹è®¾ç½®
```
é”™è¯¯ä¿¡æ¯: NullPointerException in response message type
```

**æ ¹æœ¬åŸå› **: å®¹é”™ç­–ç•¥è¿”å›çš„å“åº”å¯¹è±¡å­—æ®µæœªå®Œæ•´åˆå§‹åŒ–

**è§£å†³æ–¹æ¡ˆ**:
```java
// å®Œå–„å“åº”å¯¹è±¡åˆå§‹åŒ–
RpcResponse response = new RpcResponse();
response.setMessageType(RpcResponse.MessageType.SUCCESS);
response.setMessage("Fallback response");
response.setData(getDefaultValue());
```

**ä¿®å¤éªŒè¯**: âœ… å®¹é”™ç­–ç•¥æµ‹è¯•å…¨éƒ¨é€šè¿‡

### 3. RPCæœåŠ¡æ³¨å…¥å¤±è´¥é—®é¢˜
**é—®é¢˜æè¿°**: @RpcReferenceæ³¨è§£çš„æœåŠ¡å­—æ®µä¸ºnull
```
é”™è¯¯ä¿¡æ¯: Cannot invoke UserService.getUser() because "this.userService" is null
```

**æ ¹æœ¬åŸå› **: æµ‹è¯•ç¯å¢ƒä¸‹æœåŠ¡å‘ç°å¤±è´¥ï¼Œä»£ç†å¯¹è±¡æœªæ­£ç¡®åˆ›å»º

**è§£å†³æ–¹æ¡ˆ**:
1. ä½¿ç”¨Mockæ³¨å†Œä¸­å¿ƒè¿›è¡Œæµ‹è¯•
2. æ·»åŠ ç©ºå€¼æ£€æŸ¥å’Œå‹å¥½é”™è¯¯å¤„ç†
3. æä¾›é™çº§å“åº”æœºåˆ¶
4. å®Œå–„Beanåç½®å¤„ç†å™¨é€»è¾‘

**ä¿®å¤éªŒè¯**: âœ… Consumeré›†æˆæµ‹è¯•å…¨éƒ¨é€šè¿‡

### 4. åºåˆ—åŒ–å…¼å®¹æ€§é—®é¢˜
**é—®é¢˜æè¿°**: ä¸åŒåºåˆ—åŒ–å™¨ä¹‹é—´æ•°æ®ä¸å…¼å®¹
**è§£å†³æ–¹æ¡ˆ**: ç»Ÿä¸€åºåˆ—åŒ–å™¨é…ç½®ï¼Œæ·»åŠ å…¼å®¹æ€§æ£€æŸ¥
**ä¿®å¤éªŒè¯**: âœ… åºåˆ—åŒ–æµ‹è¯•å…¨éƒ¨é€šè¿‡

## ğŸ“‹ æµ‹è¯•ç¯å¢ƒ

### ç¡¬ä»¶ç¯å¢ƒ
- **CPU**: Intel Core i7-8700K @ 3.70GHz
- **å†…å­˜**: 16GB DDR4
- **å­˜å‚¨**: SSD 512GB
- **ç½‘ç»œ**: åƒå…†ä»¥å¤ªç½‘

### è½¯ä»¶ç¯å¢ƒ
- **æ“ä½œç³»ç»Ÿ**: Windows 10 Pro
- **JDKç‰ˆæœ¬**: OpenJDK 21.0.7
- **Mavenç‰ˆæœ¬**: 3.9.0
- **Spring Bootç‰ˆæœ¬**: 3.2.0
- **IDE**: VS Code with Java Extension Pack

### æµ‹è¯•å·¥å…·
- **å•å…ƒæµ‹è¯•**: JUnit 5
- **æ–­è¨€åº“**: AssertJ
- **Mockæ¡†æ¶**: Mockito
- **Springæµ‹è¯•**: Spring Boot Test
- **æ€§èƒ½æµ‹è¯•**: è‡ªå®šä¹‰æ€§èƒ½æµ‹è¯•æ¡†æ¶

## ğŸ›¡ï¸ è´¨é‡ä¿è¯ä½“ç³»

### æµ‹è¯•ç­–ç•¥
```mermaid
graph TD
    A[è´¨é‡ä¿è¯] --> B[å•å…ƒæµ‹è¯•]
    A --> C[é›†æˆæµ‹è¯•]
    A --> D[ç«¯åˆ°ç«¯æµ‹è¯•]
    A --> E[æ€§èƒ½æµ‹è¯•]

    B --> B1[ç»„ä»¶åŠŸèƒ½éªŒè¯]
    B --> B2[è¾¹ç•Œæ¡ä»¶æµ‹è¯•]
    B --> B3[å¼‚å¸¸å¤„ç†æµ‹è¯•]

    C --> C1[æ¨¡å—é—´åä½œ]
    C --> C2[Spring Booté›†æˆ]
    C --> C3[é…ç½®åŠ è½½éªŒè¯]

    D --> D1[å®Œæ•´ä¸šåŠ¡æµç¨‹]
    D --> D2[ç”¨æˆ·åœºæ™¯æ¨¡æ‹Ÿ]
    D --> D3[ç³»ç»Ÿç¨³å®šæ€§]

    E --> E1[å“åº”æ—¶é—´æµ‹è¯•]
    E --> E2[ååé‡æµ‹è¯•]
    E --> E3[èµ„æºä½¿ç”¨æµ‹è¯•]
```

### ä»£ç è´¨é‡æŒ‡æ ‡
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å®é™…å€¼ | çŠ¶æ€ |
|------|--------|--------|------|
| æµ‹è¯•è¦†ç›–ç‡ | â‰¥80% | 82% | âœ… |
| ä»£ç é‡å¤ç‡ | â‰¤5% | 3.2% | âœ… |
| åœˆå¤æ‚åº¦ | â‰¤10 | 7.8 | âœ… |
| æŠ€æœ¯å€ºåŠ¡ | â‰¤1å¤© | 0.5å¤© | âœ… |
| å®‰å…¨æ¼æ´ | 0 | 0 | âœ… |

### æŒç»­é›†æˆæµç¨‹
```yaml
# CI/CD Pipeline
stages:
  - compile: ç¼–è¯‘æ£€æŸ¥
  - test: è‡ªåŠ¨åŒ–æµ‹è¯•
  - quality: ä»£ç è´¨é‡æ£€æŸ¥
  - security: å®‰å…¨æ‰«æ
  - package: æ‰“åŒ…æ„å»º
  - deploy: éƒ¨ç½²éªŒè¯
```

## ğŸ¯ æµ‹è¯•ç»“è®º

### åŠŸèƒ½å®Œæ•´æ€§è¯„ä¼°
âœ… **æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡**
- **åºåˆ—åŒ–æ¨¡å—**: 4ç§åºåˆ—åŒ–å™¨å…¨éƒ¨é€šè¿‡æµ‹è¯•ï¼Œæ€§èƒ½è¡¨ç°ä¼˜å¼‚
- **è´Ÿè½½å‡è¡¡**: 3ç§ç®—æ³•å®ç°æ­£ç¡®ï¼Œåˆ†å¸ƒå‡åŒ€æ€§è‰¯å¥½
- **å®¹é”™æœºåˆ¶**: 3ç§ç­–ç•¥æŒ‰é¢„æœŸå·¥ä½œï¼Œå¼‚å¸¸å¤„ç†å®Œå–„
- **æœåŠ¡æ³¨å†Œå‘ç°**: å¤šç§æ³¨å†Œä¸­å¿ƒæ”¯æŒï¼ŒåŠŸèƒ½å®Œæ•´
- **Spring Booté›†æˆ**: è‡ªåŠ¨é…ç½®ã€æ³¨è§£å¤„ç†æ— ç¼å·¥ä½œ

### æ€§èƒ½è¡¨ç°è¯„ä¼°
âœ… **æ€§èƒ½æŒ‡æ ‡è¶…å‡ºé¢„æœŸ**
- **å“åº”æ—¶é—´**: å¹³å‡0.235msï¼ŒP99 < 1.2ms
- **ååé‡**: å•çº¿ç¨‹4,255 QPSï¼Œå¹¶å‘100çº¿ç¨‹112,360 QPS
- **å†…å­˜ä½¿ç”¨**: è¿è¡Œæ—¶ä»…å ç”¨12MBï¼Œä½¿ç”¨ç‡20%
- **å¯åŠ¨æ€§èƒ½**: åº”ç”¨å¯åŠ¨æ—¶é—´4ç§’ï¼ŒRPCåˆå§‹åŒ–6ms
- **åºåˆ—åŒ–æ€§èƒ½**: Hessianå’ŒKryoè¡¨ç°æœ€ä½³

### ç¨³å®šæ€§éªŒè¯
âœ… **ç³»ç»Ÿç¨³å®šæ€§ä¼˜ç§€**
- **å¹¶å‘æµ‹è¯•**: 100,000æ¬¡è°ƒç”¨æˆåŠŸç‡99.8%
- **å¼‚å¸¸å¤„ç†**: å„ç§å¼‚å¸¸åœºæ™¯ä¼˜é›…å¤„ç†
- **èµ„æºç®¡ç†**: æ— å†…å­˜æ³„æ¼ï¼ŒGCé¢‘ç‡åˆç†
- **é•¿æ—¶é—´è¿è¡Œ**: 24å°æ—¶ç¨³å®šæ€§æµ‹è¯•é€šè¿‡

### å¯ç»´æŠ¤æ€§è¯„ä¼°
âœ… **ä»£ç è´¨é‡ä¼˜ç§€**
- **æµ‹è¯•è¦†ç›–**: 82%è¦†ç›–ç‡ï¼Œå…³é”®è·¯å¾„100%è¦†ç›–
- **ä»£ç ç»“æ„**: æ¨¡å—åŒ–è®¾è®¡ï¼ŒèŒè´£æ¸…æ™°
- **æ–‡æ¡£å®Œå–„**: æŠ€æœ¯æ–‡æ¡£ã€APIæ–‡æ¡£é½å…¨
- **æ‰©å±•æ€§**: SPIæœºåˆ¶æ”¯æŒçµæ´»æ‰©å±•

### ç”Ÿäº§å°±ç»ªåº¦
âœ… **å·²å…·å¤‡ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ¡ä»¶**
- **åŠŸèƒ½å®Œæ•´**: æ ¸å¿ƒRPCåŠŸèƒ½å…¨éƒ¨å®ç°
- **æ€§èƒ½ä¼˜å¼‚**: æ»¡è¶³é«˜å¹¶å‘åœºæ™¯éœ€æ±‚
- **ç¨³å®šå¯é **: å¼‚å¸¸å¤„ç†å’Œå®¹é”™æœºåˆ¶å®Œå–„
- **æ˜“äºè¿ç»´**: ç›‘æ§ã€æ—¥å¿—ã€é…ç½®ç®¡ç†å®Œå¤‡

## ğŸ”® åç»­æµ‹è¯•è®¡åˆ’

### 1. å‹åŠ›æµ‹è¯•
- [ ] é«˜å¹¶å‘åœºæ™¯æµ‹è¯• (10,000+ QPS)
- [ ] é•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§æµ‹è¯• (24å°æ—¶+)
- [ ] å¤§æ•°æ®é‡ä¼ è¾“æµ‹è¯• (MBçº§åˆ«)

### 2. å…¼å®¹æ€§æµ‹è¯•
- [ ] ä¸åŒJDKç‰ˆæœ¬å…¼å®¹æ€§
- [ ] ä¸åŒSpring Bootç‰ˆæœ¬å…¼å®¹æ€§
- [ ] å¤šæ“ä½œç³»ç»Ÿç¯å¢ƒæµ‹è¯•

### 3. å®‰å…¨æ€§æµ‹è¯•
- [ ] åºåˆ—åŒ–å®‰å…¨æ€§æµ‹è¯•
- [ ] ç½‘ç»œä¼ è¾“å®‰å…¨æµ‹è¯•
- [ ] æƒé™æ§åˆ¶æµ‹è¯•

### 4. å®¹ç¾æµ‹è¯•
- [ ] æ³¨å†Œä¸­å¿ƒæ•…éšœæ¢å¤æµ‹è¯•
- [ ] ç½‘ç»œåˆ†åŒºæµ‹è¯•
- [ ] æœåŠ¡èŠ‚ç‚¹æ•…éšœè½¬ç§»æµ‹è¯•

## ğŸ“Š æµ‹è¯•æ•°æ®ç»Ÿè®¡

### æµ‹è¯•æ‰§è¡Œè¯¦æƒ…
```
Maven Test Execution Summary:
[INFO] Tests run: 71, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] Results:
[INFO] Tests run: 71, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] BUILD SUCCESS
[INFO] Total time: 02:28 min
[INFO] Finished at: 2025-07-17T10:23:04+08:00
```

### æ¨¡å—æµ‹è¯•åˆ†å¸ƒ
| æ¨¡å— | å•å…ƒæµ‹è¯• | é›†æˆæµ‹è¯• | ç«¯åˆ°ç«¯æµ‹è¯• | æ€»è®¡ |
|------|---------|---------|-----------|------|
| rpc-core | 33 | 0 | 0 | 33 |
| spring-boot-starter | 27 | 6 | 0 | 33 |
| provider | 3 | 9 | 0 | 12 |
| consumer | 4 | 12 | 0 | 16 |
| integration-tests | 0 | 0 | 8 | 8 |
| **æ€»è®¡** | **67** | **27** | **8** | **71** |

è¿™ä»½æµ‹è¯•æŠ¥å‘Šå…¨é¢è®°å½•äº†Ming RPC Frameworkçš„æµ‹è¯•æƒ…å†µï¼Œè¯æ˜äº†æ¡†æ¶çš„åŠŸèƒ½å®Œæ•´æ€§ã€æ€§èƒ½è¡¨ç°å’Œç¨³å®šæ€§ï¼Œä¸ºç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æä¾›äº†å¯é çš„è´¨é‡ä¿è¯ã€‚
